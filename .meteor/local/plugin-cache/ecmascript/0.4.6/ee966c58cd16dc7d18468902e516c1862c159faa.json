{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/packages/zurb:foundation-sites/_build/assets/js/plugins/foundation.magellan.js","filenameRelative":"/packages/zurb:foundation-sites/_build/assets/js/plugins/foundation.magellan.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/packages/zurb:foundation-sites/_build/assets/js/plugins/foundation.magellan.js.map","sourceFileName":"/packages/zurb:foundation-sites/_build/assets/js/plugins/foundation.magellan.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"foundation.magellan"},"ignored":false,"code":"'use strict';\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n  };\n}();\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\n!function ($) {\n\n  /**\n   * Magellan module.\n   * @module foundation.magellan\n   */\n\n  var Magellan = function () {\n    /**\n     * Creates a new instance of Magellan.\n     * @class\n     * @fires Magellan#init\n     * @param {Object} element - jQuery object to add the trigger to.\n     * @param {Object} options - Overrides to the default plugin settings.\n     */\n\n    function Magellan(element, options) {\n      _classCallCheck(this, Magellan);\n\n      this.$element = element;\n      this.options = $.extend({}, Magellan.defaults, this.$element.data(), options);\n\n      this._init();\n\n      Foundation.registerPlugin(this, 'Magellan');\n    }\n\n    /**\n     * Initializes the Magellan plugin and calls functions to get equalizer functioning on load.\n     * @private\n     */\n\n    _createClass(Magellan, [{\n      key: '_init',\n      value: function () {\n        function _init() {\n          var id = this.$element[0].id || Foundation.GetYoDigits(6, 'magellan');\n          var _this = this;\n          this.$targets = $('[data-magellan-target]');\n          this.$links = this.$element.find('a');\n          this.$element.attr({\n            'data-resize': id,\n            'data-scroll': id,\n            'id': id\n          });\n          this.$active = $();\n          this.scrollPos = parseInt(window.pageYOffset, 10);\n\n          this._events();\n        }\n\n        return _init;\n      }()\n\n      /**\n       * Calculates an array of pixel values that are the demarcation lines between locations on the page.\n       * Can be invoked if new elements are added or the size of a location changes.\n       * @function\n       */\n\n    }, {\n      key: 'calcPoints',\n      value: function () {\n        function calcPoints() {\n          var _this = this,\n              body = document.body,\n              html = document.documentElement;\n\n          this.points = [];\n          this.winHeight = Math.round(Math.max(window.innerHeight, html.clientHeight));\n          this.docHeight = Math.round(Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight));\n\n          this.$targets.each(function () {\n            var $tar = $(this),\n                pt = Math.round($tar.offset().top - _this.options.threshold);\n            $tar.targetPoint = pt;\n            _this.points.push(pt);\n          });\n        }\n\n        return calcPoints;\n      }()\n\n      /**\n       * Initializes events for Magellan.\n       * @private\n       */\n\n    }, {\n      key: '_events',\n      value: function () {\n        function _events() {\n          var _this = this,\n              $body = $('html, body'),\n              opts = {\n            duration: _this.options.animationDuration,\n            easing: _this.options.animationEasing\n          };\n          $(window).one('load', function () {\n            if (_this.options.deepLinking) {\n              if (location.hash) {\n                _this.scrollToLoc(location.hash);\n              }\n            }\n            _this.calcPoints();\n            _this._updateActive();\n          });\n\n          this.$element.on({\n            'resizeme.zf.trigger': this.reflow.bind(this),\n            'scrollme.zf.trigger': this._updateActive.bind(this)\n          }).on('click.zf.magellan', 'a[href^=\"#\"]', function (e) {\n            e.preventDefault();\n            var arrival = this.getAttribute('href');\n            _this.scrollToLoc(arrival);\n          });\n        }\n\n        return _events;\n      }()\n\n      /**\n       * Function to scroll to a given location on the page.\n       * @param {String} loc - a properly formatted jQuery id selector. Example: '#foo'\n       * @function\n       */\n\n    }, {\n      key: 'scrollToLoc',\n      value: function () {\n        function scrollToLoc(loc) {\n          var scrollPos = Math.round($(loc).offset().top - this.options.threshold / 2 - this.options.barOffset);\n\n          $('html, body').stop(true).animate({ scrollTop: scrollPos }, this.options.animationDuration, this.options.animationEasing);\n        }\n\n        return scrollToLoc;\n      }()\n\n      /**\n       * Calls necessary functions to update Magellan upon DOM change\n       * @function\n       */\n\n    }, {\n      key: 'reflow',\n      value: function () {\n        function reflow() {\n          this.calcPoints();\n          this._updateActive();\n        }\n\n        return reflow;\n      }()\n\n      /**\n       * Updates the visibility of an active location link, and updates the url hash for the page, if deepLinking enabled.\n       * @private\n       * @function\n       * @fires Magellan#update\n       */\n\n    }, {\n      key: '_updateActive',\n      value: function () {\n        function _updateActive() /*evt, elem, scrollPos*/{\n          var winPos = /*scrollPos ||*/parseInt(window.pageYOffset, 10),\n              curIdx;\n\n          if (winPos + this.winHeight === this.docHeight) {\n            curIdx = this.points.length - 1;\n          } else if (winPos < this.points[0]) {\n            curIdx = 0;\n          } else {\n            var isDown = this.scrollPos < winPos,\n                _this = this,\n                curVisible = this.points.filter(function (p, i) {\n              return isDown ? p - _this.options.barOffset <= winPos : p - _this.options.barOffset - _this.options.threshold <= winPos;\n            });\n            curIdx = curVisible.length ? curVisible.length - 1 : 0;\n          }\n\n          this.$active.removeClass(this.options.activeClass);\n          this.$active = this.$links.eq(curIdx).addClass(this.options.activeClass);\n\n          if (this.options.deepLinking) {\n            var hash = this.$active[0].getAttribute('href');\n            if (window.history.pushState) {\n              window.history.pushState(null, null, hash);\n            } else {\n              window.location.hash = hash;\n            }\n          }\n\n          this.scrollPos = winPos;\n          /**\n           * Fires when magellan is finished updating to the new active element.\n           * @event Magellan#update\n           */\n          this.$element.trigger('update.zf.magellan', [this.$active]);\n        }\n\n        return _updateActive;\n      }()\n\n      /**\n       * Destroys an instance of Magellan and resets the url of the window.\n       * @function\n       */\n\n    }, {\n      key: 'destroy',\n      value: function () {\n        function destroy() {\n          this.$element.off('.zf.trigger .zf.magellan').find('.' + this.options.activeClass).removeClass(this.options.activeClass);\n\n          if (this.options.deepLinking) {\n            var hash = this.$active[0].getAttribute('href');\n            window.location.hash.replace(hash, '');\n          }\n\n          Foundation.unregisterPlugin(this);\n        }\n\n        return destroy;\n      }()\n    }]);\n\n    return Magellan;\n  }();\n\n  /**\n   * Default settings for plugin\n   */\n\n  Magellan.defaults = {\n    /**\n     * Amount of time, in ms, the animated scrolling should take between locations.\n     * @option\n     * @example 500\n     */\n    animationDuration: 500,\n    /**\n     * Animation style to use when scrolling between locations.\n     * @option\n     * @example 'ease-in-out'\n     */\n    animationEasing: 'linear',\n    /**\n     * Number of pixels to use as a marker for location changes.\n     * @option\n     * @example 50\n     */\n    threshold: 50,\n    /**\n     * Class applied to the active locations link on the magellan container.\n     * @option\n     * @example 'active'\n     */\n    activeClass: 'active',\n    /**\n     * Allows the script to manipulate the url of the current page, and if supported, alter the history.\n     * @option\n     * @example true\n     */\n    deepLinking: false,\n    /**\n     * Number of pixels to offset the scroll of the page on item click if using a sticky nav bar.\n     * @option\n     * @example 25\n     */\n    barOffset: 0\n  };\n\n  // Window exports\n  Foundation.plugin(Magellan, 'Magellan');\n}(jQuery);","ast":null,"map":{"version":3,"sources":["/packages/zurb:foundation-sites/_build/assets/js/plugins/foundation.magellan.js"],"names":[],"mappings":"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","file":"/packages/zurb:foundation-sites/_build/assets/js/plugins/foundation.magellan.js.map","sourcesContent":["'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n!function ($) {\n\n  /**\n   * Magellan module.\n   * @module foundation.magellan\n   */\n\n  var Magellan = function () {\n    /**\n     * Creates a new instance of Magellan.\n     * @class\n     * @fires Magellan#init\n     * @param {Object} element - jQuery object to add the trigger to.\n     * @param {Object} options - Overrides to the default plugin settings.\n     */\n\n    function Magellan(element, options) {\n      _classCallCheck(this, Magellan);\n\n      this.$element = element;\n      this.options = $.extend({}, Magellan.defaults, this.$element.data(), options);\n\n      this._init();\n\n      Foundation.registerPlugin(this, 'Magellan');\n    }\n\n    /**\n     * Initializes the Magellan plugin and calls functions to get equalizer functioning on load.\n     * @private\n     */\n\n\n    _createClass(Magellan, [{\n      key: '_init',\n      value: function _init() {\n        var id = this.$element[0].id || Foundation.GetYoDigits(6, 'magellan');\n        var _this = this;\n        this.$targets = $('[data-magellan-target]');\n        this.$links = this.$element.find('a');\n        this.$element.attr({\n          'data-resize': id,\n          'data-scroll': id,\n          'id': id\n        });\n        this.$active = $();\n        this.scrollPos = parseInt(window.pageYOffset, 10);\n\n        this._events();\n      }\n\n      /**\n       * Calculates an array of pixel values that are the demarcation lines between locations on the page.\n       * Can be invoked if new elements are added or the size of a location changes.\n       * @function\n       */\n\n    }, {\n      key: 'calcPoints',\n      value: function calcPoints() {\n        var _this = this,\n            body = document.body,\n            html = document.documentElement;\n\n        this.points = [];\n        this.winHeight = Math.round(Math.max(window.innerHeight, html.clientHeight));\n        this.docHeight = Math.round(Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight));\n\n        this.$targets.each(function () {\n          var $tar = $(this),\n              pt = Math.round($tar.offset().top - _this.options.threshold);\n          $tar.targetPoint = pt;\n          _this.points.push(pt);\n        });\n      }\n\n      /**\n       * Initializes events for Magellan.\n       * @private\n       */\n\n    }, {\n      key: '_events',\n      value: function _events() {\n        var _this = this,\n            $body = $('html, body'),\n            opts = {\n          duration: _this.options.animationDuration,\n          easing: _this.options.animationEasing\n        };\n        $(window).one('load', function () {\n          if (_this.options.deepLinking) {\n            if (location.hash) {\n              _this.scrollToLoc(location.hash);\n            }\n          }\n          _this.calcPoints();\n          _this._updateActive();\n        });\n\n        this.$element.on({\n          'resizeme.zf.trigger': this.reflow.bind(this),\n          'scrollme.zf.trigger': this._updateActive.bind(this)\n        }).on('click.zf.magellan', 'a[href^=\"#\"]', function (e) {\n          e.preventDefault();\n          var arrival = this.getAttribute('href');\n          _this.scrollToLoc(arrival);\n        });\n      }\n\n      /**\n       * Function to scroll to a given location on the page.\n       * @param {String} loc - a properly formatted jQuery id selector. Example: '#foo'\n       * @function\n       */\n\n    }, {\n      key: 'scrollToLoc',\n      value: function scrollToLoc(loc) {\n        var scrollPos = Math.round($(loc).offset().top - this.options.threshold / 2 - this.options.barOffset);\n\n        $('html, body').stop(true).animate({ scrollTop: scrollPos }, this.options.animationDuration, this.options.animationEasing);\n      }\n\n      /**\n       * Calls necessary functions to update Magellan upon DOM change\n       * @function\n       */\n\n    }, {\n      key: 'reflow',\n      value: function reflow() {\n        this.calcPoints();\n        this._updateActive();\n      }\n\n      /**\n       * Updates the visibility of an active location link, and updates the url hash for the page, if deepLinking enabled.\n       * @private\n       * @function\n       * @fires Magellan#update\n       */\n\n    }, {\n      key: '_updateActive',\n      value: function _updateActive() /*evt, elem, scrollPos*/{\n        var winPos = /*scrollPos ||*/parseInt(window.pageYOffset, 10),\n            curIdx;\n\n        if (winPos + this.winHeight === this.docHeight) {\n          curIdx = this.points.length - 1;\n        } else if (winPos < this.points[0]) {\n          curIdx = 0;\n        } else {\n          var isDown = this.scrollPos < winPos,\n              _this = this,\n              curVisible = this.points.filter(function (p, i) {\n            return isDown ? p - _this.options.barOffset <= winPos : p - _this.options.barOffset - _this.options.threshold <= winPos;\n          });\n          curIdx = curVisible.length ? curVisible.length - 1 : 0;\n        }\n\n        this.$active.removeClass(this.options.activeClass);\n        this.$active = this.$links.eq(curIdx).addClass(this.options.activeClass);\n\n        if (this.options.deepLinking) {\n          var hash = this.$active[0].getAttribute('href');\n          if (window.history.pushState) {\n            window.history.pushState(null, null, hash);\n          } else {\n            window.location.hash = hash;\n          }\n        }\n\n        this.scrollPos = winPos;\n        /**\n         * Fires when magellan is finished updating to the new active element.\n         * @event Magellan#update\n         */\n        this.$element.trigger('update.zf.magellan', [this.$active]);\n      }\n\n      /**\n       * Destroys an instance of Magellan and resets the url of the window.\n       * @function\n       */\n\n    }, {\n      key: 'destroy',\n      value: function destroy() {\n        this.$element.off('.zf.trigger .zf.magellan').find('.' + this.options.activeClass).removeClass(this.options.activeClass);\n\n        if (this.options.deepLinking) {\n          var hash = this.$active[0].getAttribute('href');\n          window.location.hash.replace(hash, '');\n        }\n\n        Foundation.unregisterPlugin(this);\n      }\n    }]);\n\n    return Magellan;\n  }();\n\n  /**\n   * Default settings for plugin\n   */\n\n\n  Magellan.defaults = {\n    /**\n     * Amount of time, in ms, the animated scrolling should take between locations.\n     * @option\n     * @example 500\n     */\n    animationDuration: 500,\n    /**\n     * Animation style to use when scrolling between locations.\n     * @option\n     * @example 'ease-in-out'\n     */\n    animationEasing: 'linear',\n    /**\n     * Number of pixels to use as a marker for location changes.\n     * @option\n     * @example 50\n     */\n    threshold: 50,\n    /**\n     * Class applied to the active locations link on the magellan container.\n     * @option\n     * @example 'active'\n     */\n    activeClass: 'active',\n    /**\n     * Allows the script to manipulate the url of the current page, and if supported, alter the history.\n     * @option\n     * @example true\n     */\n    deepLinking: false,\n    /**\n     * Number of pixels to offset the scroll of the page on item click if using a sticky nav bar.\n     * @option\n     * @example 25\n     */\n    barOffset: 0\n  };\n\n  // Window exports\n  Foundation.plugin(Magellan, 'Magellan');\n}(jQuery);"]},"hash":"ee966c58cd16dc7d18468902e516c1862c159faa"}
