{"metadata":{"usedHelpers":["classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/packages/zurb:foundation-sites/js/foundation.accordionMenu.js","filenameRelative":"/packages/zurb:foundation-sites/js/foundation.accordionMenu.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/packages/zurb:foundation-sites/js/foundation.accordionMenu.js.map","sourceFileName":"/packages/zurb:foundation-sites/js/foundation.accordionMenu.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"foundation.accordionMenu"},"ignored":false,"code":"'use strict';\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n!function ($) {\n\n  /**\n   * AccordionMenu module.\n   * @module foundation.accordionMenu\n   * @requires foundation.util.keyboard\n   * @requires foundation.util.motion\n   * @requires foundation.util.nest\n   */\n\n  var AccordionMenu = function () {\n    /**\n     * Creates a new instance of an accordion menu.\n     * @class\n     * @fires AccordionMenu#init\n     * @param {jQuery} element - jQuery object to make into an accordion menu.\n     * @param {Object} options - Overrides to the default plugin settings.\n     */\n\n    function AccordionMenu(element, options) {\n      (0, _classCallCheck3['default'])(this, AccordionMenu);\n\n      this.$element = element;\n      this.options = $.extend({}, AccordionMenu.defaults, this.$element.data(), options);\n\n      Foundation.Nest.Feather(this.$element, 'accordion');\n\n      this._init();\n\n      Foundation.registerPlugin(this, 'AccordionMenu');\n      Foundation.Keyboard.register('AccordionMenu', {\n        'ENTER': 'toggle',\n        'SPACE': 'toggle',\n        'ARROW_RIGHT': 'open',\n        'ARROW_UP': 'up',\n        'ARROW_DOWN': 'down',\n        'ARROW_LEFT': 'close',\n        'ESCAPE': 'closeAll',\n        'TAB': 'down',\n        'SHIFT_TAB': 'up'\n      });\n    }\n\n    /**\n     * Initializes the accordion menu by hiding all nested menus.\n     * @private\n     */\n\n\n    AccordionMenu.prototype._init = function () {\n      function _init() {\n        this.$element.find('[data-submenu]').not('.is-active').slideUp(0); //.find('a').css('padding-left', '1rem');\n        this.$element.attr({\n          'role': 'tablist',\n          'aria-multiselectable': this.options.multiOpen\n        });\n\n        this.$menuLinks = this.$element.find('.is-accordion-submenu-parent');\n        this.$menuLinks.each(function () {\n          var linkId = this.id || Foundation.GetYoDigits(6, 'acc-menu-link'),\n              $elem = $(this),\n              $sub = $elem.children('[data-submenu]'),\n              subId = $sub[0].id || Foundation.GetYoDigits(6, 'acc-menu'),\n              isActive = $sub.hasClass('is-active');\n          $elem.attr({\n            'aria-controls': subId,\n            'aria-expanded': isActive,\n            'role': 'tab',\n            'id': linkId\n          });\n          $sub.attr({\n            'aria-labelledby': linkId,\n            'aria-hidden': !isActive,\n            'role': 'tabpanel',\n            'id': subId\n          });\n        });\n        var initPanes = this.$element.find('.is-active');\n        if (initPanes.length) {\n          var _this = this;\n          initPanes.each(function () {\n            _this.down($(this));\n          });\n        }\n        this._events();\n      }\n\n      return _init;\n    }();\n\n    /**\n     * Adds event handlers for items within the menu.\n     * @private\n     */\n\n\n    AccordionMenu.prototype._events = function () {\n      function _events() {\n        var _this = this;\n\n        this.$element.find('li').each(function () {\n          var $submenu = $(this).children('[data-submenu]');\n\n          if ($submenu.length) {\n            $(this).children('a').off('click.zf.accordionMenu').on('click.zf.accordionMenu', function (e) {\n              e.preventDefault();\n\n              _this.toggle($submenu);\n            });\n          }\n        }).on('keydown.zf.accordionmenu', function (e) {\n          var $element = $(this),\n              $elements = $element.parent('ul').children('li'),\n              $prevElement,\n              $nextElement,\n              $target = $element.children('[data-submenu]');\n\n          $elements.each(function (i) {\n            if ($(this).is($element)) {\n              $prevElement = $elements.eq(Math.max(0, i - 1)).find('a').first();\n              $nextElement = $elements.eq(Math.min(i + 1, $elements.length - 1)).find('a').first();\n\n              if ($(this).children('[data-submenu]:visible').length) {\n                // has open sub menu\n                $nextElement = $element.find('li:first-child').find('a').first();\n              }\n              if ($(this).is(':first-child')) {\n                // is first element of sub menu\n                $prevElement = $element.parents('li').first().find('a').first();\n              } else if ($prevElement.children('[data-submenu]:visible').length) {\n                // if previous element has open sub menu\n                $prevElement = $prevElement.find('li:last-child').find('a').first();\n              }\n              if ($(this).is(':last-child')) {\n                // is last element of sub menu\n                $nextElement = $element.parents('li').first().next('li').find('a').first();\n              }\n\n              return;\n            }\n          });\n          Foundation.Keyboard.handleKey(e, 'AccordionMenu', {\n            open: function () {\n              function open() {\n                if ($target.is(':hidden')) {\n                  _this.down($target);\n                  $target.find('li').first().find('a').first().focus();\n                }\n              }\n\n              return open;\n            }(),\n            close: function () {\n              function close() {\n                if ($target.length && !$target.is(':hidden')) {\n                  // close active sub of this item\n                  _this.up($target);\n                } else if ($element.parent('[data-submenu]').length) {\n                  // close currently open sub\n                  _this.up($element.parent('[data-submenu]'));\n                  $element.parents('li').first().find('a').first().focus();\n                }\n              }\n\n              return close;\n            }(),\n            up: function () {\n              function up() {\n                $prevElement.attr('tabindex', -1).focus();\n                return true;\n              }\n\n              return up;\n            }(),\n            down: function () {\n              function down() {\n                $nextElement.attr('tabindex', -1).focus();\n                return true;\n              }\n\n              return down;\n            }(),\n            toggle: function () {\n              function toggle() {\n                if ($element.children('[data-submenu]').length) {\n                  _this.toggle($element.children('[data-submenu]'));\n                }\n              }\n\n              return toggle;\n            }(),\n            closeAll: function () {\n              function closeAll() {\n                _this.hideAll();\n              }\n\n              return closeAll;\n            }(),\n            handled: function () {\n              function handled(preventDefault) {\n                if (preventDefault) {\n                  e.preventDefault();\n                }\n                e.stopImmediatePropagation();\n              }\n\n              return handled;\n            }()\n          });\n        }); //.attr('tabindex', 0);\n      }\n\n      return _events;\n    }();\n\n    /**\n     * Closes all panes of the menu.\n     * @function\n     */\n\n\n    AccordionMenu.prototype.hideAll = function () {\n      function hideAll() {\n        this.$element.find('[data-submenu]').slideUp(this.options.slideSpeed);\n      }\n\n      return hideAll;\n    }();\n\n    /**\n     * Toggles the open/close state of a submenu.\n     * @function\n     * @param {jQuery} $target - the submenu to toggle\n     */\n\n\n    AccordionMenu.prototype.toggle = function () {\n      function toggle($target) {\n        if (!$target.is(':animated')) {\n          if (!$target.is(':hidden')) {\n            this.up($target);\n          } else {\n            this.down($target);\n          }\n        }\n      }\n\n      return toggle;\n    }();\n\n    /**\n     * Opens the sub-menu defined by `$target`.\n     * @param {jQuery} $target - Sub-menu to open.\n     * @fires AccordionMenu#down\n     */\n\n\n    AccordionMenu.prototype.down = function () {\n      function down($target) {\n        var _this = this;\n\n        if (!this.options.multiOpen) {\n          this.up(this.$element.find('.is-active').not($target.parentsUntil(this.$element).add($target)));\n        }\n\n        $target.addClass('is-active').attr({ 'aria-hidden': false }).parent('.is-accordion-submenu-parent').attr({ 'aria-expanded': true });\n\n        //Foundation.Move(this.options.slideSpeed, $target, function() {\n        $target.slideDown(_this.options.slideSpeed, function () {\n          /**\n           * Fires when the menu is done opening.\n           * @event AccordionMenu#down\n           */\n          _this.$element.trigger('down.zf.accordionMenu', [$target]);\n        });\n        //});\n      }\n\n      return down;\n    }();\n\n    /**\n     * Closes the sub-menu defined by `$target`. All sub-menus inside the target will be closed as well.\n     * @param {jQuery} $target - Sub-menu to close.\n     * @fires AccordionMenu#up\n     */\n\n\n    AccordionMenu.prototype.up = function () {\n      function up($target) {\n        var _this = this;\n        //Foundation.Move(this.options.slideSpeed, $target, function(){\n        $target.slideUp(_this.options.slideSpeed, function () {\n          /**\n           * Fires when the menu is done collapsing up.\n           * @event AccordionMenu#up\n           */\n          _this.$element.trigger('up.zf.accordionMenu', [$target]);\n        });\n        //});\n\n        var $menus = $target.find('[data-submenu]').slideUp(0).addBack().attr('aria-hidden', true);\n\n        $menus.parent('.is-accordion-submenu-parent').attr('aria-expanded', false);\n      }\n\n      return up;\n    }();\n\n    /**\n     * Destroys an instance of accordion menu.\n     * @fires AccordionMenu#destroyed\n     */\n\n\n    AccordionMenu.prototype.destroy = function () {\n      function destroy() {\n        this.$element.find('[data-submenu]').slideDown(0).css('display', '');\n        this.$element.find('a').off('click.zf.accordionMenu');\n\n        Foundation.Nest.Burn(this.$element, 'accordion');\n        Foundation.unregisterPlugin(this);\n      }\n\n      return destroy;\n    }();\n\n    return AccordionMenu;\n  }();\n\n  AccordionMenu.defaults = {\n    /**\n     * Amount of time to animate the opening of a submenu in ms.\n     * @option\n     * @example 250\n     */\n    slideSpeed: 250,\n    /**\n     * Allow the menu to have multiple open panes.\n     * @option\n     * @example true\n     */\n    multiOpen: true\n  };\n\n  // Window exports\n  Foundation.plugin(AccordionMenu, 'AccordionMenu');\n}(jQuery);","ast":null,"map":{"version":3,"sources":["/packages/zurb:foundation-sites/js/foundation.accordionMenu.js"],"names":[],"mappings":"AAAA;;;;;;;;AAEA,CAAC,UAAS,CAAT,EAAY;;;;;;;;;;AAAA,MAUP,aAVO;;;;;;;;;AAkBX,2BAAY,OAAZ,EAAqB,OAArB,EAA8B;AAAA;;AAC5B,WAAK,QAAL,GAAgB,OAAhB;AACA,WAAK,OAAL,GAAe,EAAE,MAAF,CAAS,EAAT,EAAa,cAAc,QAA3B,EAAqC,KAAK,QAAL,CAAc,IAAd,EAArC,EAA2D,OAA3D,CAAf;;AAEA,iBAAW,IAAX,CAAgB,OAAhB,CAAwB,KAAK,QAA7B,EAAuC,WAAvC;;AAEA,WAAK,KAAL;;AAEA,iBAAW,cAAX,CAA0B,IAA1B,EAAgC,eAAhC;AACA,iBAAW,QAAX,CAAoB,QAApB,CAA6B,eAA7B,EAA8C;AAC5C,iBAAS,QADmC;AAE5C,iBAAS,QAFmC;AAG5C,uBAAe,MAH6B;AAI5C,oBAAY,IAJgC;AAK5C,sBAAc,MAL8B;AAM5C,sBAAc,OAN8B;AAO5C,kBAAU,UAPkC;AAQ5C,eAAO,MARqC;AAS5C,qBAAa;AAT+B,OAA9C;AAWD;;;;;;;;AAtCU,4BA8CX,KA9CW;AAAA,uBA8CH;AACN,aAAK,QAAL,CAAc,IAAd,CAAmB,gBAAnB,EAAqC,GAArC,CAAyC,YAAzC,EAAuD,OAAvD,CAA+D,CAA/D,E;AACA,aAAK,QAAL,CAAc,IAAd,CAAmB;AACjB,kBAAQ,SADS;AAEjB,kCAAwB,KAAK,OAAL,CAAa;AAFpB,SAAnB;;AAKA,aAAK,UAAL,GAAkB,KAAK,QAAL,CAAc,IAAd,CAAmB,8BAAnB,CAAlB;AACA,aAAK,UAAL,CAAgB,IAAhB,CAAqB,YAAU;AAC7B,cAAI,SAAS,KAAK,EAAL,IAAW,WAAW,WAAX,CAAuB,CAAvB,EAA0B,eAA1B,CAAxB;AAAA,cACI,QAAQ,EAAE,IAAF,CADZ;AAAA,cAEI,OAAO,MAAM,QAAN,CAAe,gBAAf,CAFX;AAAA,cAGI,QAAQ,KAAK,CAAL,EAAQ,EAAR,IAAc,WAAW,WAAX,CAAuB,CAAvB,EAA0B,UAA1B,CAH1B;AAAA,cAII,WAAW,KAAK,QAAL,CAAc,WAAd,CAJf;AAKA,gBAAM,IAAN,CAAW;AACT,6BAAiB,KADR;AAET,6BAAiB,QAFR;AAGT,oBAAQ,KAHC;AAIT,kBAAM;AAJG,WAAX;AAMA,eAAK,IAAL,CAAU;AACR,+BAAmB,MADX;AAER,2BAAe,CAAC,QAFR;AAGR,oBAAQ,UAHA;AAIR,kBAAM;AAJE,WAAV;AAMD,SAlBD;AAmBA,YAAI,YAAY,KAAK,QAAL,CAAc,IAAd,CAAmB,YAAnB,CAAhB;AACA,YAAG,UAAU,MAAb,EAAoB;AAClB,cAAI,QAAQ,IAAZ;AACA,oBAAU,IAAV,CAAe,YAAU;AACvB,kBAAM,IAAN,CAAW,EAAE,IAAF,CAAX;AACD,WAFD;AAGD;AACD,aAAK,OAAL;AACD;;AAjFU;AAAA;;;;;;;;AAAA,4BAuFX,OAvFW;AAAA,yBAuFD;AACR,YAAI,QAAQ,IAAZ;;AAEA,aAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB,EAAyB,IAAzB,CAA8B,YAAW;AACvC,cAAI,WAAW,EAAE,IAAF,EAAQ,QAAR,CAAiB,gBAAjB,CAAf;;AAEA,cAAI,SAAS,MAAb,EAAqB;AACnB,cAAE,IAAF,EAAQ,QAAR,CAAiB,GAAjB,EAAsB,GAAtB,CAA0B,wBAA1B,EAAoD,EAApD,CAAuD,wBAAvD,EAAiF,UAAS,CAAT,EAAY;AAC3F,gBAAE,cAAF;;AAEA,oBAAM,MAAN,CAAa,QAAb;AACD,aAJD;AAKD;AACF,SAVD,EAUG,EAVH,CAUM,0BAVN,EAUkC,UAAS,CAAT,EAAW;AAC3C,cAAI,WAAW,EAAE,IAAF,CAAf;AAAA,cACI,YAAY,SAAS,MAAT,CAAgB,IAAhB,EAAsB,QAAtB,CAA+B,IAA/B,CADhB;AAAA,cAEI,YAFJ;AAAA,cAGI,YAHJ;AAAA,cAII,UAAU,SAAS,QAAT,CAAkB,gBAAlB,CAJd;;AAMA,oBAAU,IAAV,CAAe,UAAS,CAAT,EAAY;AACzB,gBAAI,EAAE,IAAF,EAAQ,EAAR,CAAW,QAAX,CAAJ,EAA0B;AACxB,6BAAe,UAAU,EAAV,CAAa,KAAK,GAAL,CAAS,CAAT,EAAY,IAAE,CAAd,CAAb,EAA+B,IAA/B,CAAoC,GAApC,EAAyC,KAAzC,EAAf;AACA,6BAAe,UAAU,EAAV,CAAa,KAAK,GAAL,CAAS,IAAE,CAAX,EAAc,UAAU,MAAV,GAAiB,CAA/B,CAAb,EAAgD,IAAhD,CAAqD,GAArD,EAA0D,KAA1D,EAAf;;AAEA,kBAAI,EAAE,IAAF,EAAQ,QAAR,CAAiB,wBAAjB,EAA2C,MAA/C,EAAuD;;AACrD,+BAAe,SAAS,IAAT,CAAc,gBAAd,EAAgC,IAAhC,CAAqC,GAArC,EAA0C,KAA1C,EAAf;AACD;AACD,kBAAI,EAAE,IAAF,EAAQ,EAAR,CAAW,cAAX,CAAJ,EAAgC;;AAC9B,+BAAe,SAAS,OAAT,CAAiB,IAAjB,EAAuB,KAAvB,GAA+B,IAA/B,CAAoC,GAApC,EAAyC,KAAzC,EAAf;AACD,eAFD,MAEO,IAAI,aAAa,QAAb,CAAsB,wBAAtB,EAAgD,MAApD,EAA4D;;AACjE,+BAAe,aAAa,IAAb,CAAkB,eAAlB,EAAmC,IAAnC,CAAwC,GAAxC,EAA6C,KAA7C,EAAf;AACD;AACD,kBAAI,EAAE,IAAF,EAAQ,EAAR,CAAW,aAAX,CAAJ,EAA+B;;AAC7B,+BAAe,SAAS,OAAT,CAAiB,IAAjB,EAAuB,KAAvB,GAA+B,IAA/B,CAAoC,IAApC,EAA0C,IAA1C,CAA+C,GAA/C,EAAoD,KAApD,EAAf;AACD;;AAED;AACD;AACF,WAnBD;AAoBA,qBAAW,QAAX,CAAoB,SAApB,CAA8B,CAA9B,EAAiC,eAAjC,EAAkD;AAChD;AAAM,8BAAW;AACf,oBAAI,QAAQ,EAAR,CAAW,SAAX,CAAJ,EAA2B;AACzB,wBAAM,IAAN,CAAW,OAAX;AACA,0BAAQ,IAAR,CAAa,IAAb,EAAmB,KAAnB,GAA2B,IAA3B,CAAgC,GAAhC,EAAqC,KAArC,GAA6C,KAA7C;AACD;AACF;;AALD;AAAA,eADgD;AAOhD;AAAO,+BAAW;AAChB,oBAAI,QAAQ,MAAR,IAAkB,CAAC,QAAQ,EAAR,CAAW,SAAX,CAAvB,EAA8C;;AAC5C,wBAAM,EAAN,CAAS,OAAT;AACD,iBAFD,MAEO,IAAI,SAAS,MAAT,CAAgB,gBAAhB,EAAkC,MAAtC,EAA8C;;AACnD,wBAAM,EAAN,CAAS,SAAS,MAAT,CAAgB,gBAAhB,CAAT;AACA,2BAAS,OAAT,CAAiB,IAAjB,EAAuB,KAAvB,GAA+B,IAA/B,CAAoC,GAApC,EAAyC,KAAzC,GAAiD,KAAjD;AACD;AACF;;AAPD;AAAA,eAPgD;AAehD;AAAI,4BAAW;AACb,6BAAa,IAAb,CAAkB,UAAlB,EAA8B,CAAC,CAA/B,EAAkC,KAAlC;AACA,uBAAO,IAAP;AACD;;AAHD;AAAA,eAfgD;AAmBhD;AAAM,8BAAW;AACf,6BAAa,IAAb,CAAkB,UAAlB,EAA8B,CAAC,CAA/B,EAAkC,KAAlC;AACA,uBAAO,IAAP;AACD;;AAHD;AAAA,eAnBgD;AAuBhD;AAAQ,gCAAW;AACjB,oBAAI,SAAS,QAAT,CAAkB,gBAAlB,EAAoC,MAAxC,EAAgD;AAC9C,wBAAM,MAAN,CAAa,SAAS,QAAT,CAAkB,gBAAlB,CAAb;AACD;AACF;;AAJD;AAAA,eAvBgD;AA4BhD;AAAU,kCAAW;AACnB,sBAAM,OAAN;AACD;;AAFD;AAAA,eA5BgD;AA+BhD;AAAS,+BAAS,cAAT,EAAyB;AAChC,oBAAI,cAAJ,EAAoB;AAClB,oBAAE,cAAF;AACD;AACD,kBAAE,wBAAF;AACD;;AALD;AAAA;AA/BgD,WAAlD;AAsCD,SA3ED,E;AA4ED;;AAtKU;AAAA;;;;;;;;AAAA,4BA4KX,OA5KW;AAAA,yBA4KD;AACR,aAAK,QAAL,CAAc,IAAd,CAAmB,gBAAnB,EAAqC,OAArC,CAA6C,KAAK,OAAL,CAAa,UAA1D;AACD;;AA9KU;AAAA;;;;;;;;;AAAA,4BAqLX,MArLW;AAAA,sBAqLJ,OArLI,EAqLI;AACb,YAAG,CAAC,QAAQ,EAAR,CAAW,WAAX,CAAJ,EAA6B;AAC3B,cAAI,CAAC,QAAQ,EAAR,CAAW,SAAX,CAAL,EAA4B;AAC1B,iBAAK,EAAL,CAAQ,OAAR;AACD,WAFD,MAGK;AACH,iBAAK,IAAL,CAAU,OAAV;AACD;AACF;AACF;;AA9LU;AAAA;;;;;;;;;AAAA,4BAqMX,IArMW;AAAA,oBAqMN,OArMM,EAqMG;AACZ,YAAI,QAAQ,IAAZ;;AAEA,YAAG,CAAC,KAAK,OAAL,CAAa,SAAjB,EAA4B;AAC1B,eAAK,EAAL,CAAQ,KAAK,QAAL,CAAc,IAAd,CAAmB,YAAnB,EAAiC,GAAjC,CAAqC,QAAQ,YAAR,CAAqB,KAAK,QAA1B,EAAoC,GAApC,CAAwC,OAAxC,CAArC,CAAR;AACD;;AAED,gBAAQ,QAAR,CAAiB,WAAjB,EAA8B,IAA9B,CAAmC,EAAC,eAAe,KAAhB,EAAnC,EACG,MADH,CACU,8BADV,EAC0C,IAD1C,CAC+C,EAAC,iBAAiB,IAAlB,EAD/C;;;AAII,gBAAQ,SAAR,CAAkB,MAAM,OAAN,CAAc,UAAhC,EAA4C,YAAY;;;;;AAKtD,gBAAM,QAAN,CAAe,OAAf,CAAuB,uBAAvB,EAAgD,CAAC,OAAD,CAAhD;AACD,SAND;;AAQL;;AAxNU;AAAA;;;;;;;;;AAAA,4BA+NX,EA/NW;AAAA,kBA+NR,OA/NQ,EA+NC;AACV,YAAI,QAAQ,IAAZ;;AAEE,gBAAQ,OAAR,CAAgB,MAAM,OAAN,CAAc,UAA9B,EAA0C,YAAY;;;;;AAKpD,gBAAM,QAAN,CAAe,OAAf,CAAuB,qBAAvB,EAA8C,CAAC,OAAD,CAA9C;AACD,SAND;;;AASF,YAAI,SAAS,QAAQ,IAAR,CAAa,gBAAb,EAA+B,OAA/B,CAAuC,CAAvC,EAA0C,OAA1C,GAAoD,IAApD,CAAyD,aAAzD,EAAwE,IAAxE,CAAb;;AAEA,eAAO,MAAP,CAAc,8BAAd,EAA8C,IAA9C,CAAmD,eAAnD,EAAoE,KAApE;AACD;;AA9OU;AAAA;;;;;;;;AAAA,4BAoPX,OApPW;AAAA,yBAoPD;AACR,aAAK,QAAL,CAAc,IAAd,CAAmB,gBAAnB,EAAqC,SAArC,CAA+C,CAA/C,EAAkD,GAAlD,CAAsD,SAAtD,EAAiE,EAAjE;AACA,aAAK,QAAL,CAAc,IAAd,CAAmB,GAAnB,EAAwB,GAAxB,CAA4B,wBAA5B;;AAEA,mBAAW,IAAX,CAAgB,IAAhB,CAAqB,KAAK,QAA1B,EAAoC,WAApC;AACA,mBAAW,gBAAX,CAA4B,IAA5B;AACD;;AA1PU;AAAA;;AAAA;AAAA;;AA6Pb,gBAAc,QAAd,GAAyB;;;;;;AAMvB,gBAAY,GANW;;;;;;AAYvB,eAAW;AAZY,GAAzB;;;AAgBA,aAAW,MAAX,CAAkB,aAAlB,EAAiC,eAAjC;AAEC,CA/QA,CA+QC,MA/QD,CAAD","file":"/packages/zurb:foundation-sites/js/foundation.accordionMenu.js.map","sourcesContent":["'use strict';\n\n!function($) {\n\n/**\n * AccordionMenu module.\n * @module foundation.accordionMenu\n * @requires foundation.util.keyboard\n * @requires foundation.util.motion\n * @requires foundation.util.nest\n */\n\nclass AccordionMenu {\n  /**\n   * Creates a new instance of an accordion menu.\n   * @class\n   * @fires AccordionMenu#init\n   * @param {jQuery} element - jQuery object to make into an accordion menu.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n  constructor(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, AccordionMenu.defaults, this.$element.data(), options);\n\n    Foundation.Nest.Feather(this.$element, 'accordion');\n\n    this._init();\n\n    Foundation.registerPlugin(this, 'AccordionMenu');\n    Foundation.Keyboard.register('AccordionMenu', {\n      'ENTER': 'toggle',\n      'SPACE': 'toggle',\n      'ARROW_RIGHT': 'open',\n      'ARROW_UP': 'up',\n      'ARROW_DOWN': 'down',\n      'ARROW_LEFT': 'close',\n      'ESCAPE': 'closeAll',\n      'TAB': 'down',\n      'SHIFT_TAB': 'up'\n    });\n  }\n\n\n\n  /**\n   * Initializes the accordion menu by hiding all nested menus.\n   * @private\n   */\n  _init() {\n    this.$element.find('[data-submenu]').not('.is-active').slideUp(0);//.find('a').css('padding-left', '1rem');\n    this.$element.attr({\n      'role': 'tablist',\n      'aria-multiselectable': this.options.multiOpen\n    });\n\n    this.$menuLinks = this.$element.find('.is-accordion-submenu-parent');\n    this.$menuLinks.each(function(){\n      var linkId = this.id || Foundation.GetYoDigits(6, 'acc-menu-link'),\n          $elem = $(this),\n          $sub = $elem.children('[data-submenu]'),\n          subId = $sub[0].id || Foundation.GetYoDigits(6, 'acc-menu'),\n          isActive = $sub.hasClass('is-active');\n      $elem.attr({\n        'aria-controls': subId,\n        'aria-expanded': isActive,\n        'role': 'tab',\n        'id': linkId\n      });\n      $sub.attr({\n        'aria-labelledby': linkId,\n        'aria-hidden': !isActive,\n        'role': 'tabpanel',\n        'id': subId\n      });\n    });\n    var initPanes = this.$element.find('.is-active');\n    if(initPanes.length){\n      var _this = this;\n      initPanes.each(function(){\n        _this.down($(this));\n      });\n    }\n    this._events();\n  }\n\n  /**\n   * Adds event handlers for items within the menu.\n   * @private\n   */\n  _events() {\n    var _this = this;\n\n    this.$element.find('li').each(function() {\n      var $submenu = $(this).children('[data-submenu]');\n\n      if ($submenu.length) {\n        $(this).children('a').off('click.zf.accordionMenu').on('click.zf.accordionMenu', function(e) {\n          e.preventDefault();\n\n          _this.toggle($submenu);\n        });\n      }\n    }).on('keydown.zf.accordionmenu', function(e){\n      var $element = $(this),\n          $elements = $element.parent('ul').children('li'),\n          $prevElement,\n          $nextElement,\n          $target = $element.children('[data-submenu]');\n\n      $elements.each(function(i) {\n        if ($(this).is($element)) {\n          $prevElement = $elements.eq(Math.max(0, i-1)).find('a').first();\n          $nextElement = $elements.eq(Math.min(i+1, $elements.length-1)).find('a').first();\n\n          if ($(this).children('[data-submenu]:visible').length) { // has open sub menu\n            $nextElement = $element.find('li:first-child').find('a').first();\n          }\n          if ($(this).is(':first-child')) { // is first element of sub menu\n            $prevElement = $element.parents('li').first().find('a').first();\n          } else if ($prevElement.children('[data-submenu]:visible').length) { // if previous element has open sub menu\n            $prevElement = $prevElement.find('li:last-child').find('a').first();\n          }\n          if ($(this).is(':last-child')) { // is last element of sub menu\n            $nextElement = $element.parents('li').first().next('li').find('a').first();\n          }\n\n          return;\n        }\n      });\n      Foundation.Keyboard.handleKey(e, 'AccordionMenu', {\n        open: function() {\n          if ($target.is(':hidden')) {\n            _this.down($target);\n            $target.find('li').first().find('a').first().focus();\n          }\n        },\n        close: function() {\n          if ($target.length && !$target.is(':hidden')) { // close active sub of this item\n            _this.up($target);\n          } else if ($element.parent('[data-submenu]').length) { // close currently open sub\n            _this.up($element.parent('[data-submenu]'));\n            $element.parents('li').first().find('a').first().focus();\n          }\n        },\n        up: function() {\n          $prevElement.attr('tabindex', -1).focus();\n          return true;\n        },\n        down: function() {\n          $nextElement.attr('tabindex', -1).focus();\n          return true;\n        },\n        toggle: function() {\n          if ($element.children('[data-submenu]').length) {\n            _this.toggle($element.children('[data-submenu]'));\n          }\n        },\n        closeAll: function() {\n          _this.hideAll();\n        },\n        handled: function(preventDefault) {\n          if (preventDefault) {\n            e.preventDefault();\n          }\n          e.stopImmediatePropagation();\n        }\n      });\n    });//.attr('tabindex', 0);\n  }\n\n  /**\n   * Closes all panes of the menu.\n   * @function\n   */\n  hideAll() {\n    this.$element.find('[data-submenu]').slideUp(this.options.slideSpeed);\n  }\n\n  /**\n   * Toggles the open/close state of a submenu.\n   * @function\n   * @param {jQuery} $target - the submenu to toggle\n   */\n  toggle($target){\n    if(!$target.is(':animated')) {\n      if (!$target.is(':hidden')) {\n        this.up($target);\n      }\n      else {\n        this.down($target);\n      }\n    }\n  }\n\n  /**\n   * Opens the sub-menu defined by `$target`.\n   * @param {jQuery} $target - Sub-menu to open.\n   * @fires AccordionMenu#down\n   */\n  down($target) {\n    var _this = this;\n\n    if(!this.options.multiOpen) {\n      this.up(this.$element.find('.is-active').not($target.parentsUntil(this.$element).add($target)));\n    }\n\n    $target.addClass('is-active').attr({'aria-hidden': false})\n      .parent('.is-accordion-submenu-parent').attr({'aria-expanded': true});\n\n      //Foundation.Move(this.options.slideSpeed, $target, function() {\n        $target.slideDown(_this.options.slideSpeed, function () {\n          /**\n           * Fires when the menu is done opening.\n           * @event AccordionMenu#down\n           */\n          _this.$element.trigger('down.zf.accordionMenu', [$target]);\n        });\n      //});\n  }\n\n  /**\n   * Closes the sub-menu defined by `$target`. All sub-menus inside the target will be closed as well.\n   * @param {jQuery} $target - Sub-menu to close.\n   * @fires AccordionMenu#up\n   */\n  up($target) {\n    var _this = this;\n    //Foundation.Move(this.options.slideSpeed, $target, function(){\n      $target.slideUp(_this.options.slideSpeed, function () {\n        /**\n         * Fires when the menu is done collapsing up.\n         * @event AccordionMenu#up\n         */\n        _this.$element.trigger('up.zf.accordionMenu', [$target]);\n      });\n    //});\n\n    var $menus = $target.find('[data-submenu]').slideUp(0).addBack().attr('aria-hidden', true);\n\n    $menus.parent('.is-accordion-submenu-parent').attr('aria-expanded', false);\n  }\n\n  /**\n   * Destroys an instance of accordion menu.\n   * @fires AccordionMenu#destroyed\n   */\n  destroy() {\n    this.$element.find('[data-submenu]').slideDown(0).css('display', '');\n    this.$element.find('a').off('click.zf.accordionMenu');\n\n    Foundation.Nest.Burn(this.$element, 'accordion');\n    Foundation.unregisterPlugin(this);\n  }\n}\n\nAccordionMenu.defaults = {\n  /**\n   * Amount of time to animate the opening of a submenu in ms.\n   * @option\n   * @example 250\n   */\n  slideSpeed: 250,\n  /**\n   * Allow the menu to have multiple open panes.\n   * @option\n   * @example true\n   */\n  multiOpen: true\n};\n\n// Window exports\nFoundation.plugin(AccordionMenu, 'AccordionMenu');\n\n}(jQuery);\n"]},"hash":"c4ecf6081bf92291988e67027fc0407a1f92aeef"}
