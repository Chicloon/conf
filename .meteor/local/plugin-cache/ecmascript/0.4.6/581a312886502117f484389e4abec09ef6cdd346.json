{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/packages/zurb:foundation-sites/js/foundation.util.motion.js","filenameRelative":"/packages/zurb:foundation-sites/js/foundation.util.motion.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/packages/zurb:foundation-sites/js/foundation.util.motion.js.map","sourceFileName":"/packages/zurb:foundation-sites/js/foundation.util.motion.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"foundation.util.motion"},"ignored":false,"code":"'use strict';\n\n!function ($) {\n\n  /**\n   * Motion module.\n   * @module foundation.motion\n   */\n\n  var initClasses = ['mui-enter', 'mui-leave'];\n  var activeClasses = ['mui-enter-active', 'mui-leave-active'];\n\n  var Motion = {\n    animateIn: function () {\n      function animateIn(element, animation, cb) {\n        animate(true, element, animation, cb);\n      }\n\n      return animateIn;\n    }(),\n\n    animateOut: function () {\n      function animateOut(element, animation, cb) {\n        animate(false, element, animation, cb);\n      }\n\n      return animateOut;\n    }()\n  };\n\n  function Move(duration, elem, fn) {\n    var anim,\n        prog,\n        start = null;\n    // console.log('called');\n\n    function move(ts) {\n      if (!start) start = window.performance.now();\n      // console.log(start, ts);\n      prog = ts - start;\n      fn.apply(elem);\n\n      if (prog < duration) {\n        anim = window.requestAnimationFrame(move, elem);\n      } else {\n        window.cancelAnimationFrame(anim);\n        elem.trigger('finished.zf.animate', [elem]).triggerHandler('finished.zf.animate', [elem]);\n      }\n    }\n    anim = window.requestAnimationFrame(move);\n  }\n\n  /**\n   * Animates an element in or out using a CSS transition class.\n   * @function\n   * @private\n   * @param {Boolean} isIn - Defines if the animation is in or out.\n   * @param {Object} element - jQuery or HTML object to animate.\n   * @param {String} animation - CSS class to use.\n   * @param {Function} cb - Callback to run when animation is finished.\n   */\n  function animate(isIn, element, animation, cb) {\n    element = $(element).eq(0);\n\n    if (!element.length) return;\n\n    var initClass = isIn ? initClasses[0] : initClasses[1];\n    var activeClass = isIn ? activeClasses[0] : activeClasses[1];\n\n    // Set up the animation\n    reset();\n\n    element.addClass(animation).css('transition', 'none');\n\n    requestAnimationFrame(function () {\n      element.addClass(initClass);\n      if (isIn) element.show();\n    });\n\n    // Start the animation\n    requestAnimationFrame(function () {\n      element[0].offsetWidth;\n      element.css('transition', '').addClass(activeClass);\n    });\n\n    // Clean up the animation when it finishes\n    element.one(Foundation.transitionend(element), finish);\n\n    // Hides the element (for out animations), resets the element, and runs a callback\n    function finish() {\n      if (!isIn) element.hide();\n      reset();\n      if (cb) cb.apply(element);\n    }\n\n    // Resets transitions and removes motion-specific classes\n    function reset() {\n      element[0].style.transitionDuration = 0;\n      element.removeClass(initClass + ' ' + activeClass + ' ' + animation);\n    }\n  }\n\n  Foundation.Move = Move;\n  Foundation.Motion = Motion;\n}(jQuery);","ast":null,"map":{"version":3,"sources":["/packages/zurb:foundation-sites/js/foundation.util.motion.js"],"names":[],"mappings":"AAAA;;AAEA,CAAC,UAAS,CAAT,EAAY;;;;;;;AAOb,MAAM,cAAgB,CAAC,WAAD,EAAc,WAAd,CAAtB;AACA,MAAM,gBAAgB,CAAC,kBAAD,EAAqB,kBAArB,CAAtB;;AAEA,MAAM,SAAS;AACb;AAAW,yBAAS,OAAT,EAAkB,SAAlB,EAA6B,EAA7B,EAAiC;AAC1C,gBAAQ,IAAR,EAAc,OAAd,EAAuB,SAAvB,EAAkC,EAAlC;AACD;;AAFD;AAAA,OADa;;AAKb;AAAY,0BAAS,OAAT,EAAkB,SAAlB,EAA6B,EAA7B,EAAiC;AAC3C,gBAAQ,KAAR,EAAe,OAAf,EAAwB,SAAxB,EAAmC,EAAnC;AACD;;AAFD;AAAA;AALa,GAAf;;AAUA,WAAS,IAAT,CAAc,QAAd,EAAwB,IAAxB,EAA8B,EAA9B,EAAiC;AAC/B,QAAI,IAAJ;AAAA,QAAU,IAAV;AAAA,QAAgB,QAAQ,IAAxB;;;AAGA,aAAS,IAAT,CAAc,EAAd,EAAiB;AACf,UAAG,CAAC,KAAJ,EAAW,QAAQ,OAAO,WAAP,CAAmB,GAAnB,EAAR;;AAEX,aAAO,KAAK,KAAZ;AACA,SAAG,KAAH,CAAS,IAAT;;AAEA,UAAG,OAAO,QAAV,EAAmB;AAAE,eAAO,OAAO,qBAAP,CAA6B,IAA7B,EAAmC,IAAnC,CAAP;AAAkD,OAAvE,MACI;AACF,eAAO,oBAAP,CAA4B,IAA5B;AACA,aAAK,OAAL,CAAa,qBAAb,EAAoC,CAAC,IAAD,CAApC,EAA4C,cAA5C,CAA2D,qBAA3D,EAAkF,CAAC,IAAD,CAAlF;AACD;AACF;AACD,WAAO,OAAO,qBAAP,CAA6B,IAA7B,CAAP;AACD;;;;;;;;;;;AAWD,WAAS,OAAT,CAAiB,IAAjB,EAAuB,OAAvB,EAAgC,SAAhC,EAA2C,EAA3C,EAA+C;AAC7C,cAAU,EAAE,OAAF,EAAW,EAAX,CAAc,CAAd,CAAV;;AAEA,QAAI,CAAC,QAAQ,MAAb,EAAqB;;AAErB,QAAI,YAAY,OAAO,YAAY,CAAZ,CAAP,GAAwB,YAAY,CAAZ,CAAxC;AACA,QAAI,cAAc,OAAO,cAAc,CAAd,CAAP,GAA0B,cAAc,CAAd,CAA5C;;;AAGA;;AAEA,YACG,QADH,CACY,SADZ,EAEG,GAFH,CAEO,YAFP,EAEqB,MAFrB;;AAIA,0BAAsB,YAAM;AAC1B,cAAQ,QAAR,CAAiB,SAAjB;AACA,UAAI,IAAJ,EAAU,QAAQ,IAAR;AACX,KAHD;;;AAMA,0BAAsB,YAAM;AAC1B,cAAQ,CAAR,EAAW,WAAX;AACA,cACG,GADH,CACO,YADP,EACqB,EADrB,EAEG,QAFH,CAEY,WAFZ;AAGD,KALD;;;AAQA,YAAQ,GAAR,CAAY,WAAW,aAAX,CAAyB,OAAzB,CAAZ,EAA+C,MAA/C;;;AAGA,aAAS,MAAT,GAAkB;AAChB,UAAI,CAAC,IAAL,EAAW,QAAQ,IAAR;AACX;AACA,UAAI,EAAJ,EAAQ,GAAG,KAAH,CAAS,OAAT;AACT;;;AAGD,aAAS,KAAT,GAAiB;AACf,cAAQ,CAAR,EAAW,KAAX,CAAiB,kBAAjB,GAAsC,CAAtC;AACA,cAAQ,WAAR,CAAuB,SAAvB,SAAoC,WAApC,SAAmD,SAAnD;AACD;AACF;;AAED,aAAW,IAAX,GAAkB,IAAlB;AACA,aAAW,MAAX,GAAoB,MAApB;AAEC,CAhGA,CAgGC,MAhGD,CAAD","file":"/packages/zurb:foundation-sites/js/foundation.util.motion.js.map","sourcesContent":["'use strict';\n\n!function($) {\n\n/**\n * Motion module.\n * @module foundation.motion\n */\n\nconst initClasses   = ['mui-enter', 'mui-leave'];\nconst activeClasses = ['mui-enter-active', 'mui-leave-active'];\n\nconst Motion = {\n  animateIn: function(element, animation, cb) {\n    animate(true, element, animation, cb);\n  },\n\n  animateOut: function(element, animation, cb) {\n    animate(false, element, animation, cb);\n  }\n}\n\nfunction Move(duration, elem, fn){\n  var anim, prog, start = null;\n  // console.log('called');\n\n  function move(ts){\n    if(!start) start = window.performance.now();\n    // console.log(start, ts);\n    prog = ts - start;\n    fn.apply(elem);\n\n    if(prog < duration){ anim = window.requestAnimationFrame(move, elem); }\n    else{\n      window.cancelAnimationFrame(anim);\n      elem.trigger('finished.zf.animate', [elem]).triggerHandler('finished.zf.animate', [elem]);\n    }\n  }\n  anim = window.requestAnimationFrame(move);\n}\n\n/**\n * Animates an element in or out using a CSS transition class.\n * @function\n * @private\n * @param {Boolean} isIn - Defines if the animation is in or out.\n * @param {Object} element - jQuery or HTML object to animate.\n * @param {String} animation - CSS class to use.\n * @param {Function} cb - Callback to run when animation is finished.\n */\nfunction animate(isIn, element, animation, cb) {\n  element = $(element).eq(0);\n\n  if (!element.length) return;\n\n  var initClass = isIn ? initClasses[0] : initClasses[1];\n  var activeClass = isIn ? activeClasses[0] : activeClasses[1];\n\n  // Set up the animation\n  reset();\n\n  element\n    .addClass(animation)\n    .css('transition', 'none');\n\n  requestAnimationFrame(() => {\n    element.addClass(initClass);\n    if (isIn) element.show();\n  });\n\n  // Start the animation\n  requestAnimationFrame(() => {\n    element[0].offsetWidth;\n    element\n      .css('transition', '')\n      .addClass(activeClass);\n  });\n\n  // Clean up the animation when it finishes\n  element.one(Foundation.transitionend(element), finish);\n\n  // Hides the element (for out animations), resets the element, and runs a callback\n  function finish() {\n    if (!isIn) element.hide();\n    reset();\n    if (cb) cb.apply(element);\n  }\n\n  // Resets transitions and removes motion-specific classes\n  function reset() {\n    element[0].style.transitionDuration = 0;\n    element.removeClass(`${initClass} ${activeClass} ${animation}`);\n  }\n}\n\nFoundation.Move = Move;\nFoundation.Motion = Motion;\n\n}(jQuery);\n"]},"hash":"581a312886502117f484389e4abec09ef6cdd346"}
